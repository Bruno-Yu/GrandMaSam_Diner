{"version":3,"file":"js/470.11cece59.js","mappings":"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","sources":["webpack://week-8-project/./src/views/frontend/LocalStorage.vue","webpack://week-8-project/./src/views/frontend/LocalStorage.vue?0264"],"sourcesContent":["<template>\n  <PageLoading\n    loader=\"bars\"\n    :active=\"isLoading\"\n    :can-cancel=\"true\"\n    :is-full-page=\"false\"\n  ></PageLoading>\n  <div v-if=\"favorites.length\" class=\"container mt-3\">\n    <div class=\"row bg-warning border-bottom border-3 border-dark\">\n      <div class=\"local-baby\" />\n    </div>\n    <div class=\"row mt-5 mb-3\">\n      <h1 class=\"text-center font-Noto fs-1 fw-bold\">收藏</h1>\n    </div>\n    <div class=\"row d-flex justify-content-end\">\n      <div class=\"col-auto me-md-5\">\n        <button\n          class=\"btn btn-outline-danger fw-bold font-Noto mb-1\"\n          type=\"button\"\n          @click=\"removeFavAll\"\n          :disabled=\"isLoadingItem === 'deleteAll' || favorites.length === 0\"\n        >\n          <span\n            class=\"spinner-grow spinner-grow-sm\"\n            v-show=\"isLoadingItem === 'deleteAll'\"\n          ></span\n          >清空收藏\n        </button>\n      </div>\n    </div>\n    <div\n      class=\"container shadow my-4 bg-body border border-1 border-body p-5 rounded\"\n    >\n      <div class=\"row\">\n        <table class=\"table\">\n          <thead>\n            <tr\n              class=\"text-start text-start font-Noto fw-bold fs-5 text-primary\"\n            >\n              <th>刪<span class=\"d-none d-lg-inline\">除鍵</span></th>\n              <th class=\"d-none d-lg-table-cell\">預覽圖</th>\n              <th>品名</th>\n              <th>單價</th>\n              <th class=\"d-none d-lg-table-cell\">產品細節</th>\n              <th class=\"text-nowrap\">\n                加<span class=\"d-none d-lg-inline\">入</span>購<span\n                  class=\"d-none d-lg-inline\"\n                  >物車</span\n                >\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in favProducts\" :key=\"item.id\" class=\"text-start\">\n              <td>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger btn-sm\"\n                  @click=\"removeFromFavorites(item.id)\"\n                  :disabled=\"isLoadingItem === item.id\"\n                >\n                  <span\n                    class=\"spinner-grow spinner-grow-sm\"\n                    v-show=\"isLoadingItem === item.id\"\n                  ></span>\n                  x\n                </button>\n              </td>\n              <td class=\"d-none d-lg-table-cell\">\n                <div\n                  class=\"localStorage-product\"\n                  :style=\"{ backgroundImage: `url(${item.imageUrl})` }\"\n                ></div>\n              </td>\n              <td class=\"font-Noto fs-5 fw-400\">\n                {{ item.title }}\n              </td>\n              <td>\n                <span\n                  class=\"spinner-grow spinner-grow-sm\"\n                  v-show=\"isLoadingItem === item.id\"\n                ></span>\n                <span class=\"text-secondary fz-sm\"\n                  >{{ item.price }}\n                  <span class=\"d-none d-lg-inline font-Noto fs-5 fw-400\"\n                    >元</span\n                  >\n                  <span class=\"d-none d-lg-inline font-Noto fs-5 fw-400\">\n                    / {{ item.unit }}</span\n                  >\n                </span>\n              </td>\n              <td class=\"d-none d-lg-table-cell\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-secondary btn-sm  mt-2 font-Noto fw-400\"\n                  :disabled=\"isLoadingItem === item.id\"\n                  @click=\"goToProductView(item.id)\"\n                >\n                  <span\n                    class=\"spinner-grow spinner-grow-sm font-Noto fs-5 fw-400\"\n                    v-show=\"isLoadingItem === item.id\"\n                  ></span>\n                  查看更多\n                </button>\n              </td>\n              <td>\n                <button\n                  type=\"button\"\n                  class=\"btn\"\n                  @click=\"[addToCart(item.id), removeFromFavorites(item.id)]\"\n                  :disabled=\"isLoadingItem === item.id\"\n                >\n                  <span\n                    class=\"spinner-grow spinner-grow-sm\"\n                    v-show=\"isLoadingItem === item.id\"\n                  ></span>\n                  <i class=\"d-lg-none bi bi-cart2 text-danger\"></i\n                  ><span\n                    class=\"d-none d-lg-inline-block btn btn-danger font-Noto fs-6 fw-400 btn-sm \"\n                  >\n                    加到購物車</span\n                  >\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"text-end my-3\">\n          <button\n            class=\"btn btn-danger font-Noto fw-bold border border-1 border-body \"\n            type=\"button\"\n            @click=\"addAllToCart\"\n            :disabled=\"isLoadingItem === 'addAll' || favorites.length === 0\"\n          >\n            <span\n              class=\"spinner-grow spinner-grow-sm\"\n              v-show=\"isLoadingItem === 'addAll'\"\n            ></span>\n            全加到購物車\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div v-else class=\"container gx-0 fav-banner vh-100 my-1\">\n    <div class=\"row d-flex align-items-center justify-content-center vh-100\">\n      <div class=\"col vh-30 my-3\">\n        <div class=\"container bg-light font-Noto dialog-local-bg py-2\">\n          <p\n            class=\"text-dark fs-2 fw-bold text-center mt-4 mt-sm-2 font-Noto fw-500\"\n          >\n            怎麼? 你以為這是一般的購物網站嗎?\n          </p>\n          <p class=\"text-dark fs-4 fw-bold text-center pt-2 font-Noto fw-400\">\n            你有想過\n            <span class=\"d-inline-block d-sm-inline\">非洲的小孩</span\n            >每過60秒就<span class=\"text-danger d-inline-block d-sm-inline\"\n              >少了1分鐘的壽命</span\n            >嗎?\n          </p>\n          <p class=\"text-dark fs-4 fw-bold text-center font-Noto fw-400\">\n            而這\n          </p>\n          <p class=\"text-dark fs-4 fw-bold text-center font-Noto fw-400\">\n            並不是收不收藏商品的問題，而是愛不愛國的問題!!!\n          </p>\n          <div class=\"d-flex justify-content-center mt-2 mb-2 mt-lg-4\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-dark fs-3  p-2 mb-1 border border-dark border-2 w-30 font-Noto fw-600\"\n              @click=\"goToAIDS\"\n            >\n              我愛滋\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-danger fs-3 link-light mx-2 p-2 mb-1 border border-dark border-1 w-30 font-Noto fw-600\"\n              @click=\"backToStore\"\n            >\n              我愛國\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      // 購物車列表\n      favorites: JSON.parse(window.localStorage.getItem('favorites')) || [],\n      cartData: {\n        carts: [],\n      },\n      products: [],\n      favProducts: [],\n      productId: '',\n      isLoading: false,\n      isLoadingItem: '',\n    };\n  },\n  methods: {\n    backToStore() {\n      this.$router.push('/productsView');\n    },\n    goToAIDS() {\n      this.$router.push('/aidsIntro');\n    },\n    getFavor(products) {\n      this.favorites.forEach((id) => {\n        this.favProducts.push(products.filter((item) => item.id === id));\n      });\n      this.favProducts = this.favProducts.flat(1);\n    },\n    getProducts() {\n      this.isLoading = true;\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products`,\n        )\n        .then((res) => {\n          this.products = res.data.products;\n          this.getFavor(this.products);\n          this.isLoading = false;\n        })\n        .catch((error) => {\n          this.$frontHttpMessageState(error.response, '產品截取失敗');\n        });\n    },\n\n    getCart() {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.cartData = res.data.data;\n        })\n        .catch((error) => {\n          this.$frontHttpMessageState(error.response, '購物車截取失敗');\n        });\n    },\n    // 注意: 加入購物車需帶入兩個參數 1.id 2.數量\n    saveToFavorites(id) {\n      this.favorites.push(id);\n    },\n    removeFromFavorites(id) {\n      this.isLoadingItem = 'id';\n      const target = this.favorites.indexOf(id);\n      if (target !== -1) {\n        this.favorites.splice(target, 1);\n        this.isLoadingItem = '';\n      }\n    },\n    addToCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty,\n      };\n      this.isLoadingItem = id;\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`,\n          { data },\n        )\n        .then(() => {\n          this.getCart();\n          this.isLoadingItem = '';\n        })\n        .catch((error) => {\n          this.$frontHttpMessageState(error.response, '購物車增加失敗');\n        });\n    },\n    addAllToCart() {\n      this.isLoadingItem = 'addAll';\n      this.favorites.forEach((id) => {\n        this.addToCart(id);\n      });\n      this.removeFavAll();\n      this.isLoadingItem = '';\n    },\n    removeFavAll() {\n      this.isLoadingItem = 'deleteAll';\n      this.favorites = [];\n      this.favProducts = [];\n      this.isLoadingItem = '';\n    },\n    goToProductView(id) {\n      this.isLoading = true;\n      this.$router.push(`/productView/${id}`);\n      this.isLoading = false;\n    },\n  },\n  watch: {\n    favorites: {\n      handler() {\n        window.localStorage.setItem(\n          'favorites',\n          JSON.stringify(this.favorites),\n        );\n        this.getProducts();\n      },\n      deep: true,\n    },\n  },\n  created() {\n    this.isLoading = true;\n    this.getProducts();\n    this.isLoading = false;\n  },\n};\n</script>\n","import { render } from \"./LocalStorage.vue?vue&type=template&id=23b1f5ca\"\nimport script from \"./LocalStorage.vue?vue&type=script&lang=js\"\nexport * from \"./LocalStorage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\jackh\\\\OneDrive\\\\Documents\\\\Github-res\\\\hexschool-vue-projects\\\\Homework\\\\GrandMaSam_Diner\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createVNode","_component_PageLoading","loader","active","$data","length","_createElementBlock","_hoisted_2","_hoisted_3","type","onClick","$options","disabled","_hoisted_12","_Fragment","_renderList","item","key","id","style","backgroundImage","imageUrl","_toDisplayString","title","price","_hoisted_20","unit","_hoisted_28","_hoisted_29","_hoisted_38","data","favorites","JSON","parse","window","localStorage","getItem","cartData","carts","products","favProducts","productId","isLoading","isLoadingItem","methods","backToStore","this","$router","push","goToAIDS","getFavor","forEach","filter","flat","getProducts","$http","get","then","res","catch","error","$frontHttpMessageState","response","getCart","saveToFavorites","removeFromFavorites","target","indexOf","splice","addToCart","qty","product_id","post","addAllToCart","removeFavAll","goToProductView","watch","handler","setItem","stringify","deep","created","__exports__","render"],"sourceRoot":""}