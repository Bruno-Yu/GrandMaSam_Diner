"use strict";(self["webpackChunkweek_8_project"]=self["webpackChunkweek_8_project"]||[]).push([[795],{5795:function(e,t,s){s.r(t),s.d(t,{default:function(){return E}});var o=s(6252),a=s(3577),l=s(9963);const r={class:"container px-lg-5"},n={class:"container my-3 d-none d-md-grid"},d={class:"row row-cols-3"},i={class:"col"},c=(0,o._)("p",{class:"fs-4 font-Noto fw-600 text-dark my-2"},"購物車",-1),m=[c],u=(0,o.uE)('<div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button"><p class="fs-4 font-Noto fw-600 my-2">填寫資訊</p></button></div><div class="col"><button class="btn w-100 btn-outline-secondary rounded-2 border border-body border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 my-2">訂單內容</p></button></div>',2),f=(0,o._)("div",{class:"row mt-5 mb-3"},[(0,o._)("h2",{class:"font-Noto fw-700 text-center text-md-start ps-md-5 text-warning"}," 步驟 2. 填寫資訊 ")],-1),b={class:"row justify-content-center shadow my-5 bg-light border border-1 border-body rounded-3"},p={class:"mb-3"},h=(0,o._)("label",{for:"email",class:"form-label font-Noto fw-400"},[(0,o.Uk)(" Email "),(0,o._)("span",{class:"text-danger fw-bolder"},"*")],-1),g={class:"mb-3"},w=(0,o._)("label",{for:"name",class:"form-label font-Noto fw-400"},[(0,o.Uk)("收件人姓名 "),(0,o._)("span",{class:"text-danger fw-bolder"},"*")],-1),_={class:"mb-3"},v=(0,o._)("label",{for:"tel",class:"form-label font-Noto fw-400"},[(0,o.Uk)("收件人電話 "),(0,o._)("span",{class:"text-danger fw-bolder"},"*")],-1),y={class:"mb-3"},k=(0,o._)("label",{for:"address",class:"form-label font-Noto fw-400"},[(0,o.Uk)("收件人地址 "),(0,o._)("span",{class:"text-danger fw-bolder"},"*")],-1),x={class:"mb-3"},V=(0,o._)("label",{for:"message",class:"form-label font-Noto fw-400"},"留言",-1),L=(0,o._)("p",{class:"text-secondary fw-bolder small"},[(0,o.Uk)(" 說明: "),(0,o._)("span",{class:"text-danger fw-bolder"}," * "),(0,o.Uk)("代表必填項目 ")],-1),N={class:"d-flex justify-content-between"},C=["disabled"];function U(e,t,s,c,U,W){const $=(0,o.up)("PageLoading"),P=(0,o.up)("VField"),E=(0,o.up)("ErrorMessage"),S=(0,o.up)("VForm");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)($,{loader:"bars",active:U.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),(0,o._)("div",r,[(0,o._)("div",n,[(0,o._)("div",d,[(0,o._)("div",i,[(0,o._)("button",{class:"btn w-100 btn-warning rounded-2 border border-dark border-3",type:"button",onClick:t[0]||(t[0]=(...e)=>W.prePage&&W.prePage(...e))},m)]),u])]),f,(0,o._)("div",b,[(0,o.Wm)(S,{ref:"form",class:"col-md-6 rounded-3 p-5",onSubmit:W.onSubmit},{default:(0,o.w5)((({errors:e})=>[(0,o._)("div",p,[h,(0,o.Wm)(P,{id:"email",name:"email",type:"email",class:(0,a.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:U.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=e=>U.form.user.email=e)},null,8,["class","modelValue"]),(0,o.Wm)(E,{name:"email",class:"invalid-feedback"})]),(0,o._)("div",g,[w,(0,o.Wm)(P,{id:"name",name:"姓名",type:"text",class:(0,a.C_)(["form-control font-Noto fw-400",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:W.noEmpty,modelValue:U.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=e=>U.form.user.name=e)},null,8,["class","rules","modelValue"]),(0,o.Wm)(E,{name:"姓名",class:"invalid-feedback"})]),(0,o._)("div",_,[v,(0,o.Wm)(P,{id:"tel",name:"電話",type:"tel",class:(0,a.C_)(["form-control font-Noto fw-400",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:W.isPhone,modelValue:U.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=e=>U.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,o.Wm)(E,{name:"電話",class:"invalid-feedback"})]),(0,o._)("div",y,[k,(0,o.Wm)(P,{id:"address",name:"地址",type:"text",class:(0,a.C_)(["form-control font-Noto fw-400",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:W.noEmpty,modelValue:U.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=e=>U.form.user.address=e)},null,8,["class","rules","modelValue"]),(0,o.Wm)(E,{name:"地址",class:"invalid-feedback"})]),(0,o._)("div",x,[V,(0,o.wy)((0,o._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10",rules:{required:!1},"onUpdate:modelValue":t[5]||(t[5]=e=>U.form.message=e)},null,512),[[l.nr,U.form.message]])]),L,(0,o._)("div",N,[(0,o._)("button",{class:"d-block btn btn-outline-danger font-Noto fw-bold",type:"button",onClick:t[6]||(t[6]=(...e)=>W.prePage&&W.prePage(...e))}," 上一步 "),(0,o._)("button",{type:"submit",class:"d-block btn btn-danger font-Noto fw-bold shadow",disabled:Object.keys(e).length>0||0===U.cartData.carts.length}," 送出訂單 ",8,C)])])),_:1},8,["onSubmit"])])])],64)}var W={data(){return{cartData:{carts:[]},isLoadingItem:"",isLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{addToCart(e,t=1){const s={product_id:e,qty:t};this.isLoadingItem=e,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart",{data:s}).then((()=>{this.getCart(),this.isLoadingItem=""}))},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart").then((e=>{this.cartData=e.data.data})).catch((e=>{this.isLoading=!1,this.$frontHttpMessageState(e.response,"購物車截取失敗")}))},onSubmit(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/order",t=this.form;this.$http.post(e,{data:t}).then((()=>{this.$refs.form.resetForm(),this.$router.push("/orderCheck"),this.isLoading=!1})).catch((e=>{this.isLoading=!1,this.$frontHttpMessageState(e.response,"表單傳送失敗")}))},noEmpty(e){return!!e||"此欄不得為空"},isPhone(e){const t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},prePage(){this.isLoading=!0,this.$router.push("/cartView"),this.isLoading=!1}},mounted(){this.isLoading=!0,this.getCart(),this.isLoading=!1}},$=s(3744);const P=(0,$.Z)(W,[["render",U]]);var E=P}}]);
//# sourceMappingURL=795.c44ad7a4.js.map