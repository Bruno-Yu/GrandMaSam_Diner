"use strict";(self["webpackChunkweek_8_project"]=self["webpackChunkweek_8_project"]||[]).push([[658],{3106:function(t,a,s){s.d(a,{Z:function(){return m}});var e=s(6252),o=s(3577),i=s(9963);const l={"aria-label":"Page navigation"},r={class:"pagination justify-content-center"},n=["aria-disabled"],d={key:0,class:"page-link link-dark fw-bold"},c=["onClick"],u=["aria-disabled"];function p(t,a,s,p,h,g){return(0,e.wg)(),(0,e.iD)("nav",l,[(0,e._)("ul",r,[(0,e._)("li",{class:(0,o.C_)(["page-item",{disabled:!s.hasPre}])},[(0,e._)("a",{class:"page-link link-dark fw-bold",href:"#",tabindex:"-1","aria-disabled":!s.hasPre,onClick:a[0]||(a[0]=(0,i.iM)((t=>g.emitData(s.currentPage-1)),["prevent"]))},"上吐",8,n)],2),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(s.totalPages,((t,a)=>((0,e.wg)(),(0,e.iD)("li",{class:(0,o.C_)(["page-item",{active:t===s.currentPage}]),key:a},[t===s.currentPage?((0,e.wg)(),(0,e.iD)("span",d,(0,o.zw)(t),1)):((0,e.wg)(),(0,e.iD)("a",{key:1,class:"page-link link-dark fw-bold",href:"#",onClick:(0,i.iM)((a=>g.emitData(t)),["prevent"])},(0,o.zw)(t),9,c))],2)))),128)),(0,e._)("li",{class:(0,o.C_)(["page-item",{disabled:!s.hasNext}])},[(0,e._)("a",{class:"page-link fw-bold",href:"#","aria-disabled":!s.hasNext,onClick:a[1]||(a[1]=(0,i.iM)((t=>g.emitData(s.currentPage+1)),["prevent"]))},"下瀉",8,u)],2)])])}var h={data(){return{}},props:["currentPage","hasPre","hasNext","totalPages"],methods:{emitData(t){this.$emit("click-page",t)}}},g=s(3744);const b=(0,g.Z)(h,[["render",p]]);var m=b},771:function(t,a,s){s.d(a,{Z:function(){return C}});var e=s(6252);const o={class:"modal fade",ref:"modalMessage",id:"cartMessage",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},i={class:"modal-dialog"},l={key:0,class:"modal-content"},r={class:"modal-header bg-warning"},n=(0,e._)("h3",{class:"modal-title text-light font-Noto fw-550",id:"exampleModalLabel"}," 執行成功 ",-1),d=(0,e.uE)('<div class="modal-body"><div class="container pt-2 gx-2"><h5 class="fw-bold"><span class="text-success"><i class="bi bi-check-circle"></i></span> 噗通! 商品如粑粑那樣成功落入購物車中 </h5></div></div>',1),c={class:"modal-footer"},u={class:"container gx-2 d-flex justify-content-center"},p={key:1,class:"modal-content"},h={class:"modal-header bg-danger"},g=(0,e._)("h3",{class:"modal-title text-light font-Noto fw-550",id:"exampleModalLabel"}," 刪除警示 ",-1),b=(0,e._)("div",{class:"modal-body"},[(0,e._)("div",{class:"container gx-2 pt-2"},[(0,e._)("h5",{class:"font-Noto fw-550"},"即將被您刪除的商品會感到難過"),(0,e._)("p",{class:"font-Noto fw-400"}," 其實我們的商品也是有情緒的，您這麼做會讓商品感受到您的冷漠，而他們要的，其實不多，只是希望您能接受他們而已 ")])],-1),m={class:"modal-footer gx-2"},w={class:"container d-flex justify-content-end"};function v(t,a,s,v,f,_){return(0,e.wg)(),(0,e.iD)("div",o,[(0,e._)("div",i,[f.add?((0,e.wg)(),(0,e.iD)("div",l,[(0,e._)("div",r,[n,(0,e._)("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=(...t)=>_.closeModal&&_.closeModal(...t)),"data-bs-dismiss":"modal","aria-label":"Close"})]),d,(0,e._)("div",c,[(0,e._)("div",u,[(0,e._)("button",{type:"button",class:"btn btn-warning mx-2 mb-1 p-2 border border-dark border-1 font-Noto fw-400",onClick:a[1]||(a[1]=(...t)=>_.closeModal&&_.closeModal(...t))}," 好優 ")])])])):((0,e.wg)(),(0,e.iD)("div",p,[(0,e._)("div",h,[g,(0,e._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:a[2]||(a[2]=(...t)=>_.closeModal&&_.closeModal(...t)),"aria-label":"Close"})]),b,(0,e._)("div",m,[(0,e._)("div",w,[(0,e._)("button",{type:"button",class:"btn btn-outline-dark p-2 mb-1 font-Noto fw-400","data-bs-dismiss":"modal",onClick:a[3]||(a[3]=(...t)=>_.closeModal&&_.closeModal(...t))}," 再想想 "),(0,e._)("button",{type:"button",class:"btn btn-danger ms-2 p-2 mb-1 border border-dark border-1 font-Noto fw-400",onClick:a[4]||(a[4]=a=>(_.removeCart(f.all,f.id),t.$emit("get-cart"),_.closeModal()))}," 這與我無瓜 ")])])]))])],512)}var f=s(7424),_=s.n(f),y={data(){return{modal:null,add:!0,id:"",all:!1}},methods:{openModal(t,a,s){t?this.add=!0:(this.add=!1,this.id=a,this.all=!!s),this.modal.show()},closeModal(){this.modal.hide(),this.id="",this.all=!1},removeCart(t,a){t?this.$http.delete("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/carts").then((()=>{})):this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart/${a}`).then((()=>{}))}},mounted(){this.modal=new(_())(document.querySelector("#cartMessage"))}},k=s(3744);const x=(0,k.Z)(y,[["render",v]]);var C=x},6658:function(t,a,s){s.r(a),s.d(a,{default:function(){return Pt}});var e=s(6252),o=s(9963),i=s(3577);const l=(0,e.uE)('<div class="container bg-warning"><div class="row row-cols-1 row-cols-lg-2 g-1 my-1"><div class="col col-lg-6"><div class="container px-2 py-4 p-sm-5 bg-warning rounded"><div class="row ps-2 row-cols-1"><div class="col m-auto"><h2 class="mt-5 mb-4 ms-2 fs-1 text-nowrap text-dark text-center text-sm-start font-Noto fw-800"> 產品/服務列表 </h2><p class="fs-3 text-dark text-sm-nowrap font-Noto fw-600"> 廚師介紹 </p><p class="fs-5 text-sm-nowrap font-Noto fw-550 text-bg-productsView-yellow"><span class="d-none d-md-inline">五腥出品，</span>來自嘉義明雄的米其林廚師帶來的味道 </p><p class="fs-5 text-sm-nowrap font-Noto fw-550 text-bg-productsView-yellow"> 而每份<span class="d-none d-md-inline">他所帶來的</span>食物，都有屬於食材自己的故事 </p><p class="fs-5 text-sm-nowrap font-Noto fw-550 text-bg-productsView-yellow"> 只要您用心品嘗，一定能嚐出嘉明<span class="d-none d-md-inline font-Noto">( 嘉義民雄 )</span>的味道 </p></div></div></div></div><div class="d-none d-sm-grid col col-lg-6 productsView-banner mt-1"></div></div></div>',1),r={class:"container mb-5 mt-md-5 mt-3 mb-7"},n={class:"row"},d={class:"col-md-2"},c={class:"border border-bottom border-top-0 border-start-0 border-end-0 mb-3 mx-1"},u={class:"card border-0"},p={class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0"},h=(0,e._)("div",{class:"d-flex justify-content-between align-items-center pe-1 my-2"},[(0,e._)("h4",{class:"fw-bold"},[(0,e.Uk)(" 類別 "),(0,e._)("span",{class:"text-secondary small"}," ▽ ")])],-1),g={class:"card-body p-0"},b={class:"list-group"},m={class:"list-group-item p-0"},w=["onClick"],v={class:"text-secondary small mt-2"},f=(0,e.Uk)(" 說明: 再點一下 "),_=(0,e._)("span",{class:"fw-bold"}," 類別鈕 ",-1),y=(0,e.Uk)(">回到 "),k=(0,e._)("span",{class:"fw-bold"}," 全類別 ",-1),x=[f,_,y,k],C={class:"col-md-10"},M={class:"row row-cols-1 row-cols-lg-3"},D={class:"card border-0 mb-2 p-2 g-1 shadow overall position-relative"},L={class:"cart-img-top"},$={class:"card-body p-1"},N={class:"mb-0 mt-1 fw-bold"},P={class:"d-flex justify-content-between"},I={class:"card-text my-1 fw-bold"},F={class:"text-muted fw-light small my-auto"},z=["onClick","disabled"],S={class:"spinner-grow spinner-grow-sm"},q=(0,e.Uk)(" 加入購物車 "),H=["onClick","onKeyup"],Z={key:0,class:"bi bi-heart-fill"},j={key:1,class:"bi bi-heart"},U={class:"d-flex justify-content-center mt-5"};function W(t,a,s,f,_,y){const k=(0,e.up)("PageLoading"),W=(0,e.up)("CartModal"),O=(0,e.up)("CartMessage"),T=(0,e.up)("RouterLink"),V=(0,e.up)("CartIcon"),K=(0,e.up)("PaginationFooter");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(k,{loader:"bars",active:_.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),(0,e.Wm)(W,{ref:"CartModal"},null,512),(0,e.Wm)(O,{ref:"cartMessage"},null,512),l,(0,e._)("div",r,[(0,e._)("div",n,[(0,e._)("div",d,[(0,e._)("div",c,[(0,e._)("div",u,[(0,e._)("div",p,[h,(0,e._)("div",g,[(0,e._)("ul",b,[(0,e.wy)((0,e._)("li",m,[(0,e._)("button",{type:"button",class:"fw-bold btn btn-light h-100 w-100 p-2",onClick:a[0]||(a[0]=t=>y.arrestHim())}," 未亡人系列 ")],512),[[o.F8,!1===_.num]]),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(_.categories,((t,a)=>((0,e.wg)(),(0,e.iD)("li",{class:"list-group-item p-0",key:a},[(0,e._)("button",{type:"button",class:"fw-bold btn btn-light h-100 w-100 p-2",onClick:a=>(_.num=!_.num)?y.getCategory(t):y.catButton()},(0,i.zw)(t),9,w)])))),128))]),(0,e.wy)((0,e._)("p",v,x,512),[[o.F8,_.num]])])])])])]),(0,e._)("div",C,[(0,e._)("div",M,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(_.products,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"col p-2",key:t.id},[(0,e._)("div",D,[(0,e._)("div",L,[(0,e.Wm)(T,{to:{path:`/productView/${t.id}`},class:"text-decoration-none"},{default:(0,e.w5)((()=>[(0,e._)("div",{class:"cart-image rounded-0 ratio ratio-16x9",style:(0,i.j5)({backgroundImage:`url(${t.imageUrl})`})},null,4)])),_:2},1032,["to"])]),(0,e._)("div",$,[(0,e._)("h5",N,(0,i.zw)(t.title),1),(0,e._)("div",P,[(0,e._)("div",null,[(0,e._)("p",I," TWD "+(0,i.zw)(t.price),1),(0,e._)("p",F,[(0,e._)("del",null," 原價TWD"+(0,i.zw)(t.origin_price),1)])]),(0,e._)("button",{type:"button",class:"btn btn-warning fw-bolder border border-1 btn-sm p-2 my-auto",onClick:a=>(y.addToCart(t.id),y.getCart()),disabled:_.isLoadingItem===t.id},[(0,e.wy)((0,e._)("span",S,null,512),[[o.F8,_.isLoadingItem===t.id]]),q],8,z)])]),(0,e._)("a",{href:"#",class:"position-absolute text-light",style:{right:"16px",top:"16px"},onClick:(0,o.iM)((a=>_.favorites.includes(t.id)?y.removeFromFavorites(t.id):y.saveToFavorites(t.id)),["prevent"]),onKeyup:(0,o.D2)((a=>_.favorites.includes(t.id)?y.removeFromFavorites(t.id):y.saveToFavorites(t.id)),["i"])},[_.favorites.includes(t.id)?((0,e.wg)(),(0,e.iD)("i",Z)):((0,e.wg)(),(0,e.iD)("i",j))],40,H)])])))),128)),(0,e._)("button",{type:"button",class:"btn",onClick:a[1]||(a[1]=t=>y.openCartModal(_.cartData))},[(0,e.Wm)(V,{cartNum:_.cartNum},null,8,["cartNum"])])])]),(0,e._)("div",U,[(0,e.wy)((0,e.Wm)(K,{"current-page":_.current_page,"has-pre":_.has_pre,"has-next":_.has_next,"total-pages":_.total_pages,onClickPage:y.getProducts},null,8,["current-page","has-pre","has-next","total-pages","onClickPage"]),[[o.F8,!1===_.num]])])])])],64)}var O=s(4902),T=s(3106),V=s(771);const K={type:"button",class:"cart-icon bg-warning shadow p-2 mb-1 fw-bold link-warning fs-4"},Y={class:"bi bi-cart2 position-relative"},J={class:"position-absolute top-10 start-100 translate-middle p-1 bg-danger border border-light border-1 rounded-circle text-light fw-bold",style:{"font-size":"0.5rem"}},E=(0,e._)("span",{class:"visually-hidden"},"購物車內品項",-1);function B(t,a,s,o,l,r){return(0,e.wg)(),(0,e.iD)("div",null,[(0,e._)("button",K,[(0,e._)("i",Y,[(0,e._)("span",J,[(0,e.Uk)((0,i.zw)(s.cartNum)+" ",1),E])])])])}var R={props:["cartNum"]},A=s(3744);const G=(0,A.Z)(R,[["render",B]]);var Q=G;const X={class:"modal fade",id:"CartModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},tt={class:"modal-dialog",role:"document"},at={class:"modal-content"},st={class:"modal-header bg-warning"},et=(0,e._)("h5",{class:"modal-title fw-bold",id:"exampleModalLabel"},"購物車",-1),ot={class:"modal-body"},it={key:0,class:"px-2 pt-3"},lt={class:"table mb-0"},rt=(0,e._)("thead",null,[(0,e._)("th",null,"刪除"),(0,e._)("th",null,"品名"),(0,e._)("th",null,"數量"),(0,e._)("th",{class:"text-right"},"單價")],-1),nt=["onClick","disabled"],dt={class:"spinner-grow spinner-grow-sm"},ct=(0,e.Uk)(" x "),ut={key:0,class:"text-dark"},pt=(0,e._)("small",null,"已套用優惠券",-1),ht=[pt],gt={class:"text-right"},bt={key:1,colspan:"4",class:"text-right fw-bold pt-3"},mt={key:0},wt={colspan:"4",class:"text-right text-dark h5 border-top-0 fw-bold"},vt={key:1,class:"container my-3 text-center"},ft=(0,e._)("p",{class:"h3 text-secondary"},"目前無選購商品，歡迎立即選購",-1),_t=[ft],yt={key:0,class:"modal-footer"};function kt(t,a,s,l,r,n){const d=(0,e.up)("RouterLink");return(0,e.wg)(),(0,e.iD)("div",X,[(0,e._)("div",tt,[(0,e._)("div",at,[(0,e._)("div",st,[et,(0,e._)("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=(...t)=>n.closeModal&&n.closeModal(...t)),"data-bs-dismiss":"modal","aria-label":"Close"})]),(0,e._)("div",ot,[r.cart.carts.length>0?((0,e.wg)(),(0,e.iD)("section",it,[(0,e._)("table",lt,[rt,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(r.cart.carts,((t,a)=>((0,e.wg)(),(0,e.iD)("tr",{key:a},[(0,e._)("td",null,[(0,e._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>(n.removeCart(t.id),this.modal.hide()),disabled:r.isLoadingItem===t.id},[(0,e.wy)((0,e._)("span",dt,null,512),[[o.F8,r.isLoadingItem===t.id]]),ct],8,nt)]),(0,e._)("td",null,[(0,e.Wm)(d,{to:{path:`/productView/${t.product.id}`},class:"text-decoration-none link-dark fw-bold"},{default:(0,e.w5)((()=>[(0,e.Uk)((0,i.zw)(t.product.title),1)])),_:2},1032,["to"]),t.coupon?((0,e.wg)(),(0,e.iD)("div",ut,ht)):(0,e.kq)("",!0)]),(0,e._)("td",null,(0,i.zw)(t.qty)+(0,i.zw)(t.product.unit),1),(0,e._)("td",gt,"$"+(0,i.zw)(t.total),1)])))),128)),(0,e._)("tr",null,[r.cart.total==r.cart.final_total?((0,e.wg)(),(0,e.iD)("td",{key:0,colspan:"4",class:(0,i.C_)(["text-right fw-bold pt-3",{"text-dark":r.cart.total==r.cart.final_total,h5:r.cart.total==r.cart.final_total}])}," 總計 $"+(0,i.zw)(r.cart.total),3)):(0,e.kq)("",!0),r.cart.total!==r.cart.final_total?((0,e.wg)(),(0,e.iD)("td",bt,[(0,e._)("del",null,"總計 $"+(0,i.zw)(r.cart.total),1)])):(0,e.kq)("",!0)]),r.cart.total!==r.cart.final_total?((0,e.wg)(),(0,e.iD)("tr",mt,[(0,e._)("td",wt," 折扣價   $"+(0,i.zw)(r.cart.final_total),1)])):(0,e.kq)("",!0)])])])):(0,e.kq)("",!0),0===r.cart.carts.length?((0,e.wg)(),(0,e.iD)("section",vt,_t)):(0,e.kq)("",!0)]),r.cart.carts.length>0?((0,e.wg)(),(0,e.iD)("div",yt,[(0,e._)("button",{type:"button",class:"btn btn-warning btn-block btn-shadow fw-bold",onClick:a[1]||(a[1]=t=>(n.closeModal(),n.goOrders()))}," 結帳去 ")])):(0,e.kq)("",!0)])])])}var xt=s(7424),Ct=s.n(xt),Mt={data(){return{modal:null,isLoadingItem:"",cart:{carts:[]}}},methods:{goOrders(){this.$router.push("/cartView")},openModal(t){this.cart=t,this.modal.show()},closeModal(){this.isLoadingItem="",this.modal.hide()},removeCart(t){this.isLoadingItem=t,this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart/${t}`).then((()=>{O.Z.emit("get-cart"),this.isLoadingItem=""}))}},mounted(){this.modal=new(Ct())(document.querySelector("#CartModal"))}};const Dt=(0,A.Z)(Mt,[["render",kt]]);var Lt=Dt,$t={data(){return{products:[],allProducts:[],showProducts:this.products,productId:"",addNum:0,num:!1,isLoading:!1,isLoadingItem:"",categories:[],current_page:1,has_next:!0,has_pre:!1,total_pages:1,cartNum:0,cartData:{carts:[]},favorites:JSON.parse(window.localStorage.getItem("favorites"))||[]}},components:{PaginationFooter:T.Z,CartMessage:V.Z,CartIcon:Q,CartModal:Lt},methods:{arrestHim(){this.$router.push("/arrestUser")},openCartModal(t){this.$refs.CartModal.openModal(t)},getCategory(t){const a=[];this.isLoading=!0;let s="https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/products/all";t&&(s=`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/products?category=${t}`),this.$http.get(s).then((s=>{this.allProducts=JSON.parse(JSON.stringify(s.data.products)),t&&(this.products=this.allProducts),this.allProducts.forEach((t=>{a.push(t.category)})),this.categories=a.filter(((t,s)=>a.indexOf(t)===s)),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$frontHttpMessageState(t.response,"類別截取失敗")}))},getProducts(t=1){const a=`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/products?page=${t}`;this.isLoading=!0,this.$http.get(a).then((t=>{this.products=t.data.products,this.current_page=t.data.pagination.current_page,this.has_next=t.data.pagination.has_next,this.has_pre=t.data.pagination.has_pre,this.total_pages=t.data.pagination.total_pages,this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$frontHttpMessageState(t.response,"產品截取失敗")}))},getProduct(t){this.isLoading=!0,this.$router.push(`/user/product/${t}`),this.isLoading=!1},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart").then((t=>{this.cartData=t.data.data,this.cartNum=t.data.data.carts.length||0})).catch((t=>{this.$frontHttpMessageState(t.response,"購物車截取失敗")}))},saveToFavorites(t){this.favorites.push(t)},removeFromFavorites(t){const a=this.favorites.indexOf(t);-1!==a&&this.favorites.splice(a,1)},catButton(){this.getCategory(),this.getProducts()},addToCart(t,a=1){const s={product_id:t,qty:a};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart",{data:s}).then((()=>{this.isLoadingItem="",this.$refs.cartMessage.openModal(!0)})).catch((t=>{this.isLoadingItem="",this.$frontHttpMessageState(t.response,"購物車增加失敗")}))}},watch:{favorites:{handler(){window.localStorage.setItem("favorites",JSON.stringify(this.favorites))},deep:!0}},created(){O.Z.on("get-cart",(()=>{this.getCart(),this.openCartModal(this.cartData)}))},mounted(){this.isLoading=!0,this.getCart(),this.getProducts(),this.getCategory(),this.isLoading=!1}};const Nt=(0,A.Z)($t,[["render",W]]);var Pt=Nt}}]);
//# sourceMappingURL=658.d2da609a.js.map