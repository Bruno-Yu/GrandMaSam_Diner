"use strict";(self["webpackChunkweek_8_project"]=self["webpackChunkweek_8_project"]||[]).push([[825],{3106:function(t,a,e){e.d(a,{Z:function(){return b}});var i=e(6252),s=e(3577),l=e(9963);const d={"aria-label":"Page navigation"},o={class:"pagination justify-content-center"},n=["aria-disabled"],r={key:0,class:"page-link link-dark fw-bold"},c=["onClick"],p=["aria-disabled"];function u(t,a,e,u,m,h){return(0,i.wg)(),(0,i.iD)("nav",d,[(0,i._)("ul",o,[(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:!e.hasPre}])},[(0,i._)("a",{class:"page-link link-dark fw-bold",href:"#",tabindex:"-1","aria-disabled":!e.hasPre,onClick:a[0]||(a[0]=(0,l.iM)((t=>h.emitData(e.currentPage-1)),["prevent"]))},"上吐",8,n)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.totalPages,((t,a)=>((0,i.wg)(),(0,i.iD)("li",{class:(0,s.C_)(["page-item",{active:t===e.currentPage}]),key:a},[t===e.currentPage?((0,i.wg)(),(0,i.iD)("span",r,(0,s.zw)(t),1)):((0,i.wg)(),(0,i.iD)("a",{key:1,class:"page-link link-dark fw-bold",href:"#",onClick:(0,l.iM)((a=>h.emitData(t)),["prevent"])},(0,s.zw)(t),9,c))],2)))),128)),(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:!e.hasNext}])},[(0,i._)("a",{class:"page-link fw-bold",href:"#","aria-disabled":!e.hasNext,onClick:a[1]||(a[1]=(0,l.iM)((t=>h.emitData(e.currentPage+1)),["prevent"]))},"下瀉",8,p)],2)])])}var m={data(){return{}},props:["currentPage","hasPre","hasNext","totalPages"],methods:{emitData(t){this.$emit("click-page",t)}}},h=e(3744);const g=(0,h.Z)(m,[["render",u]]);var b=g},8825:function(t,a,e){e.r(a),e.d(a,{default:function(){return oa}});var i=e(6252),s=e(9963),l=e(3577);const d={class:"container p-5"},o=(0,i._)("h2",{class:"my-5 ms-2 fw-bold text-center"},"產品管理列表",-1),n={class:"text-end mt-4"},r=["disabled"],c={class:"spinner-grow spinner-grow-sm"},p=(0,i.Uk)(" 建立新的產品 "),u={class:"row py-3"},m={class:"col-xl-6"},h={class:"table mt-4"},g=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{width:"100"},"分類"),(0,i._)("th",null,"產品名稱"),(0,i._)("th",{width:"100"},"原價"),(0,i._)("th",{width:"100"},"售價"),(0,i._)("th",{width:"100"},"是否啟用"),(0,i._)("th",{width:"100"},"功能按鈕")])],-1),b={class:"fw-bold text-decoration-underline"},y={class:"text-secondary fw-light"},D={class:"fw-bold"},_={key:0,class:"text-success"},w={key:1,class:"text-danger"},v=["data-id"],f=["data-detail-id","onClick","disabled"],k={class:"spinner-grow spinner-grow-sm"},x=(0,i.Uk)(" 細節 "),U=["data-edit-id","onClick","disabled"],L={class:"spinner-grow spinner-grow-sm"},M=(0,i.Uk)(" 編輯 "),C=["data-delete-id","onClick","disabled"],O={class:"spinner-grow spinner-grow-sm"},P=(0,i.Uk)(" 刪除 "),$={class:"col-xl-6"};function z(t,a,e,z,I,N){const V=(0,i.up)("PageLoading"),S=(0,i.up)("ProductDetail"),F=(0,i.up)("EditModal"),H=(0,i.up)("PaginationFooter");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(V,{loader:"bars",active:I.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),(0,i._)("div",d,[o,(0,i._)("div",n,[(0,i._)("button",{type:"button",class:"btn btn-primary font-Noto fw-400",onClick:a[0]||(a[0]=t=>N.modalOn("new")),disabled:"New"===I.isLoadingItem},[(0,i.wy)((0,i._)("span",c,null,512),[[s.F8,"New"===I.isLoadingItem]]),p],8,r)]),(0,i._)("div",u,[(0,i._)("div",m,[(0,i._)("table",h,[g,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(I.productsList,((t,a)=>((0,i.wg)(),(0,i.iD)("tr",{key:a},[(0,i._)("td",null,(0,l.zw)(t.category),1),(0,i._)("td",b,(0,l.zw)(t.title),1),(0,i._)("td",y,(0,l.zw)(t.origin_price),1),(0,i._)("td",D,(0,l.zw)(t.price),1),(0,i._)("td",null,[t.is_enabled?((0,i.wg)(),(0,i.iD)("span",_,"啟用")):((0,i.wg)(),(0,i.iD)("span",w,"未啟用"))]),(0,i._)("td",null,[(0,i._)("div",{class:"btn-group","data-id":a},[(0,i._)("button",{type:"button",class:"btn btn-outline-success btn-sm","data-detail-id":a,onClick:a=>N.productDetail(t),disabled:I.isLoadingItem===t.id},[(0,i.wy)((0,i._)("span",k,null,512),[[s.F8,I.isLoadingItem===t.id]]),x],8,f),(0,i._)("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-edit-id":a,onClick:a=>N.modalOn("edit",t),disabled:I.isLoadingItem===t.id},[(0,i.wy)((0,i._)("span",L,null,512),[[s.F8,I.isLoadingItem===t.id]]),M],8,U),(0,i._)("button",{type:"button",class:"btn btn-outline-danger btn-sm","data-delete-id":a,onClick:a=>N.modalOn("delete",t),disabled:I.isLoadingItem===t.id},[(0,i.wy)((0,i._)("span",O,null,512),[[s.F8,I.isLoadingItem===t.id]]),P],8,C)],8,v)])])))),128))])])]),(0,i._)("div",$,[(0,i.Wm)(S,{"product-display":I.emitData.productDisplay,"detail-display":I.emitData.detailDisplay},null,8,["product-display","detail-display"])])])]),(0,i.Wm)(F,{ref:"editModal",onGetData:N.getData},null,8,["onGetData"]),(0,i.Wm)(H,{"current-page":I.current_page,"has-pre":I.has_pre,"has-next":I.has_next,"total-pages":I.total_pages,onClickPage:N.getData},null,8,["current-page","has-pre","has-next","total-pages","onClickPage"])],64)}const I={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},N={class:"modal-dialog"},V={class:"modal-content border-0"},S=(0,i.uE)('<div class="modal-header bg-danger text-white"><h5 id="delProductModalLabel" class="modal-title"><span>刪除產品</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> 是否刪除 <strong class="text-danger"></strong> 商品(刪除後將無法恢復)。 </div>',2),F={class:"modal-footer"},H=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),Y={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},Z={class:"modal-dialog modal-xl"},j={class:"modal-content border-0"},K={class:"modal-header bg-dark text-white"},T={id:"productModalLabel",class:"modal-title"},W={key:0},q={key:1},E=(0,i._)("button",{type:"button",class:"btn-close btn-light","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),G={class:"modal-body container"},A={class:"row"},B={class:"col-sm-12 col-md-6"},J={class:"mb-2"},Q={class:"mb-3"},R=(0,i._)("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址",-1),X=["src","alt"],tt={class:"form-group"},at=(0,i._)("label",{for:"imagesUrl",class:"form-label"},"圖片網址",-1),et=["onUpdate:modelValue"],it=["src","alt"],st={key:0},lt={key:1},dt={class:"col-sm-12 col-md-6"},ot={class:"mb-3"},nt=(0,i._)("label",{for:"title",class:"form-label"},"標題",-1),rt={class:"row"},ct={class:"mb-3 col-md-6"},pt=(0,i._)("label",{for:"category",class:"form-label"},"分類",-1),ut={class:"mb-3 col-md-6"},mt=(0,i._)("label",{for:"unit",class:"form-label"},"單位",-1),ht={class:"row"},gt={class:"mb-3 col-md-6"},bt=(0,i._)("label",{for:"origin_price",class:"form-label"},"原價",-1),yt={class:"mb-3 col-md-6"},Dt=(0,i._)("label",{for:"price",class:"form-label"},"售價",-1),_t=(0,i._)("hr",null,null,-1),wt={class:"mb-3"},vt=(0,i._)("label",{for:"description",class:"form-label"},"產品描述",-1),ft={class:"mb-3"},kt=(0,i._)("label",{for:"content",class:"form-label"},"說明內容",-1),xt={class:"mb-3"},Ut={class:"form-check"},Lt=(0,i._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Mt={class:"modal-footer bg-dark text-white"},Ct=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Ot(t,a,e,d,o,n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)((0,i._)("div",I,[(0,i._)("div",N,[(0,i._)("div",V,[S,(0,i._)("div",F,[H,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:a[0]||(a[0]=(...t)=>n.updateData&&n.updateData(...t))}," 確認刪除 ")])])])],512),[[s.F8,t.delteOn]]),(0,i.wy)((0,i._)("div",Y,[(0,i._)("div",Z,[(0,i._)("div",j,[(0,i._)("div",K,[(0,i._)("h5",T,[o.newOn?((0,i.wg)(),(0,i.iD)("span",W,(0,l.zw)(o.newTitle),1)):((0,i.wg)(),(0,i.iD)("span",q,(0,l.zw)(o.editTitle),1))]),E]),(0,i._)("div",G,[(0,i._)("div",A,[(0,i._)("div",B,[(0,i._)("div",J,[(0,i._)("div",Q,[R,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":a[1]||(a[1]=t=>o.productDisplay.imageUrl=t),id:"imageUrl"},null,512),[[s.nr,o.productDisplay.imageUrl]])]),(0,i._)("img",{class:"img-fluid",src:o.productDisplay.imageUrl,alt:o.productDisplay.title},null,8,X),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.productDisplay.imagesUrl,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{class:"mb-1",key:a},[(0,i._)("div",tt,[at,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t=>o.productDisplay.imagesUrl[a]=t,type:"text",class:"form-control",placeholder:"請輸入圖片連結",id:"imagesUrl"},null,8,et),[[s.nr,o.productDisplay.imagesUrl[a]]])]),(0,i._)("img",{class:"img-fluid",src:t,alt:a},null,8,it)])))),128)),!o.productDisplay.imagesUrl.length||o.productDisplay.imagesUrl[o.productDisplay.imagesUrl.length-1]?((0,i.wg)(),(0,i.iD)("div",st,[(0,i._)("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:a[2]||(a[2]=t=>o.productDisplay.imagesUrl.push(""))}," 新增圖片 ")])):((0,i.wg)(),(0,i.iD)("div",lt,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger btn-sm d-block w-100",onClick:a[3]||(a[3]=t=>o.productDisplay.imagesUrl.pop())}," 刪除圖片 ")]))])]),(0,i._)("div",dt,[(0,i._)("div",ot,[nt,(0,i.wy)((0,i._)("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":a[4]||(a[4]=t=>o.productDisplay.title=t)},null,512),[[s.nr,o.productDisplay.title]])]),(0,i._)("div",rt,[(0,i._)("div",ct,[pt,(0,i.wy)((0,i._)("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":a[5]||(a[5]=t=>o.productDisplay.category=t)},null,512),[[s.nr,o.productDisplay.category]])]),(0,i._)("div",ut,[mt,(0,i.wy)((0,i._)("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":a[6]||(a[6]=t=>o.productDisplay.unit=t)},null,512),[[s.nr,o.productDisplay.unit]])])]),(0,i._)("div",ht,[(0,i._)("div",gt,[bt,(0,i.wy)((0,i._)("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":a[7]||(a[7]=t=>o.productDisplay.origin_price=t)},null,512),[[s.nr,o.productDisplay.origin_price]])]),(0,i._)("div",yt,[Dt,(0,i.wy)((0,i._)("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":a[8]||(a[8]=t=>o.productDisplay.price=t)},null,512),[[s.nr,o.productDisplay.price]])])]),_t,(0,i._)("div",wt,[vt,(0,i.wy)((0,i._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":a[9]||(a[9]=t=>o.productDisplay.description=t)},"\n                ",512),[[s.nr,o.productDisplay.description]])]),(0,i._)("div",ft,[kt,(0,i.wy)((0,i._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":a[10]||(a[10]=t=>o.productDisplay.content=t)},"\n                ",512),[[s.nr,o.productDisplay.content]])]),(0,i._)("div",xt,[(0,i._)("div",Ut,[(0,i.wy)((0,i._)("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":a[11]||(a[11]=t=>o.productDisplay.is_enabled=t)},null,512),[[s.e8,o.productDisplay.is_enabled]]),Lt])])])]),(0,i._)("div",Mt,[Ct,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:a[12]||(a[12]=(...t)=>n.updateData&&n.updateData(...t))}," 確認 ")])])])])],512),[[s.F8,!o.deleteOn]])],64)}var Pt=e(7424),$t=e.n(Pt),zt={inject:["emitData"],data(){return{newTitle:"新增產品",editTitle:"編輯產品",bsNewproduct:null,bsDeleteproduct:null,productDisplay:this.emitData.productDisplay,newOn:this.emitData.newOn,detailDisplay:this.emitData.detailDisplay,deleteOn:this.emitData.deleteOn}},watch:{emitData:{handler(){this.productDisplay=this.emitData.productDisplay,this.newOn=this.emitData.newOn,this.detailDisplay=this.emitData.detailDisplay,this.deleteOn=this.emitData.deleteOn},deep:!0}},methods:{updateData(){this.newOn?this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/admin/product",{data:this.productDisplay}).then((t=>{this.$httpMessageState(t,"更新資料成功"),this.bsNewproduct.hide(),this.$emit("get-data")})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息"),this.bsNewproduct.hide()})):this.deleteOn?this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/admin/product/${this.productDisplay.id}`).then((t=>{this.$httpMessageState(t,"成功刪除"),this.$emit("get-data"),this.bsDeleteproduct.hide()})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息"),this.bsDeleteproduct.hide()})):this.$http.put(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/admin/product/${this.productDisplay.id}`,{data:this.productDisplay}).then((t=>{this.$httpMessageState(t,"成功獲得資料"),this.bsNewproduct.hide(),this.$emit("get-data")})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息"),this.bsNewproduct.hide()}))}},mounted(){this.bsNewproduct=new($t())(document.querySelector("#productModal")),this.bsDeleteproduct=new($t())(document.querySelector("#delProductModal"))}},It=e(3744);const Nt=(0,It.Z)(zt,[["render",Ot]]);var Vt=Nt,St=e(3106);const Ft={key:0},Ht={class:"card mb-3"},Yt=["src"],Zt={class:"card-body"},jt={class:"card-title"},Kt={class:"badge bg-primary ms-2"},Tt={class:"card-text"},Wt={class:"card-text"},qt={class:"d-flex"},Et={class:"card-text me-2"},Gt={class:"card-text text-secondary"},At={key:0},Bt=["src"],Jt={key:1,class:"text-secondary"},Qt=(0,i.Uk)(" 請點擊"),Rt=(0,i._)("span",{class:"text-danger"},"呈現細節",-1),Xt=(0,i.Uk)("按鈕，查看商品細節 "),ta=[Qt,Rt,Xt];function aa(t,a,e,s,d,o){return e.detailDisplay?((0,i.wg)(),(0,i.iD)("div",Ft,[(0,i._)("div",Ht,[(0,i._)("img",{src:e.productDisplay.imageUrl,class:"card-img-top primary-image",alt:"主圖"},null,8,Yt),(0,i._)("div",Zt,[(0,i._)("h5",jt,[(0,i.Uk)((0,l.zw)(e.productDisplay.title),1),(0,i._)("span",Kt,(0,l.zw)(e.productDisplay.category),1)]),(0,i._)("p",Tt,"商品描述："+(0,l.zw)(e.productDisplay.description),1),(0,i._)("p",Wt,"商品內容："+(0,l.zw)(e.productDisplay.content),1),(0,i._)("div",qt,[(0,i._)("p",Et,(0,l.zw)(e.productDisplay.price),1),(0,i._)("p",Gt,[(0,i._)("del",null,(0,l.zw)(e.productDisplay.origin_price),1)]),(0,i.Uk)(" "+(0,l.zw)(e.productDisplay.unit)+" / 元 ",1)])])]),e.productDisplay.id?((0,i.wg)(),(0,i.iD)("div",At,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.productDisplay.imagesUrl,((t,a)=>((0,i.wg)(),(0,i.iD)("img",{src:t,key:a,alt:"",class:"images m-2"},null,8,Bt)))),128))])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("p",Jt,ta))}var ea={props:["productDisplay","detailDisplay"]};const ia=(0,It.Z)(ea,[["render",aa]]);var sa=ia,la={data(){return{productsList:null,current_page:1,has_next:!0,has_pre:!1,total_pages:1,isLoadingItem:"",isLoading:!1,emitData:{productDisplay:{imagesUrl:[]},newOn:!1,detailDisplay:!1,deleteOn:!1}}},components:{EditModal:Vt,PaginationFooter:St.Z,ProductDetail:sa},provide(){return{emitData:this.emitData}},methods:{getData(t=1){this.$http.get(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/admin/products?page=${t}`).then((t=>{this.productsList=t.data.products,this.current_page=t.data.pagination.current_page,this.has_next=t.data.pagination.has_next,this.has_pre=t.data.pagination.has_pre,this.total_pages=t.data.pagination.total_pages})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"錯誤訊息")}))},modalOn(t,a){this.isLoading=!0,"edit"===t?(this.isLoadingItem=a.id,this.emitData.productDisplay={imagesUrl:[]},this.emitData.detailDisplay=!1,this.emitData.productDisplay=a,this.$refs.editModal.bsNewproduct.show()):"new"===t?(this.isLoadingItem="New",this.emitData.productDisplay={imagesUrl:[]},this.emitData.newOn=!0,this.emitData.detailDisplay=!1,this.emitData.deleteOn=!1,this.$refs.editModal.bsNewproduct.show()):"delete"===t&&(this.isLoadingItem=a.id,this.emitData.productDisplay={imagesUrl:[]},this.emitData.productDisplay=a,this.emitData.newOn=!1,this.emitData.detailDisplay=!1,this.emitData.deleteOn=!0,this.$refs.editModal.bsDeleteproduct.show()),this.isLoadingItem="",this.isLoading=!1},productDetail(t){this.isLoadingItem=t.id,this.emitData.productDisplay=t,this.emitData.detailDisplay=!0,this.isLoadingItem=""}},mounted(){this.isLoading=!0,this.getData(),this.isLoading=!1}};const da=(0,It.Z)(la,[["render",z]]);var oa=da}}]);
//# sourceMappingURL=825.4f6c8fa9.js.map