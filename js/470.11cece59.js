"use strict";(self["webpackChunkweek_8_project"]=self["webpackChunkweek_8_project"]||[]).push([[470],{4470:function(t,s,o){o.r(s),o.d(s,{default:function(){return B}});var e=o(6252),n=o(9963),a=o(3577);const i={key:0,class:"container mt-3"},l=(0,e._)("div",{class:"row bg-warning border-bottom border-3 border-dark"},[(0,e._)("div",{class:"local-baby"})],-1),d=(0,e._)("div",{class:"row mt-5 mb-3"},[(0,e._)("h1",{class:"text-center font-Noto fs-1 fw-bold"},"收藏")],-1),r={class:"row d-flex justify-content-end"},c={class:"col-auto me-md-5"},g=["disabled"],b={class:"spinner-grow spinner-grow-sm"},u=(0,e.Uk)("清空收藏 "),p={class:"container shadow my-4 bg-body border border-1 border-body p-5 rounded"},f={class:"row"},h={class:"table"},m=(0,e._)("thead",null,[(0,e._)("tr",{class:"text-start text-start font-Noto fw-bold fs-5 text-primary"},[(0,e._)("th",null,[(0,e.Uk)("刪"),(0,e._)("span",{class:"d-none d-lg-inline"},"除鍵")]),(0,e._)("th",{class:"d-none d-lg-table-cell"},"預覽圖"),(0,e._)("th",null,"品名"),(0,e._)("th",null,"單價"),(0,e._)("th",{class:"d-none d-lg-table-cell"},"產品細節"),(0,e._)("th",{class:"text-nowrap"},[(0,e.Uk)(" 加"),(0,e._)("span",{class:"d-none d-lg-inline"},"入"),(0,e.Uk)("購"),(0,e._)("span",{class:"d-none d-lg-inline"},"物車")])])],-1),w=["onClick","disabled"],v={class:"spinner-grow spinner-grow-sm"},_=(0,e.Uk)(" x "),k={class:"d-none d-lg-table-cell"},y={class:"font-Noto fs-5 fw-400"},L={class:"spinner-grow spinner-grow-sm"},x={class:"text-secondary fz-sm"},I=(0,e._)("span",{class:"d-none d-lg-inline font-Noto fs-5 fw-400"},"元",-1),C={class:"d-none d-lg-inline font-Noto fs-5 fw-400"},F={class:"d-none d-lg-table-cell"},N=["disabled","onClick"],A={class:"spinner-grow spinner-grow-sm font-Noto fs-5 fw-400"},T=(0,e.Uk)(" 查看更多 "),S=["onClick","disabled"],P={class:"spinner-grow spinner-grow-sm"},$=(0,e._)("i",{class:"d-lg-none bi bi-cart2 text-danger"},null,-1),D=(0,e._)("span",{class:"d-none d-lg-inline-block btn btn-danger font-Noto fs-6 fw-400 btn-sm"}," 加到購物車",-1),U={class:"text-end my-3"},j=["disabled"],H={class:"spinner-grow spinner-grow-sm"},z=(0,e.Uk)(" 全加到購物車 "),V={key:1,class:"container gx-0 fav-banner vh-100 my-1"},E={class:"row d-flex align-items-center justify-content-center vh-100"},M={class:"col vh-30 my-3"},O={class:"container bg-light font-Noto dialog-local-bg py-2"},J=(0,e.uE)('<p class="text-dark fs-2 fw-bold text-center mt-4 mt-sm-2 font-Noto fw-500"> 怎麼? 你以為這是一般的購物網站嗎? </p><p class="text-dark fs-4 fw-bold text-center pt-2 font-Noto fw-400"> 你有想過 <span class="d-inline-block d-sm-inline">非洲的小孩</span>每過60秒就<span class="text-danger d-inline-block d-sm-inline">少了1分鐘的壽命</span>嗎? </p><p class="text-dark fs-4 fw-bold text-center font-Noto fw-400"> 而這 </p><p class="text-dark fs-4 fw-bold text-center font-Noto fw-400"> 並不是收不收藏商品的問題，而是愛不愛國的問題!!! </p>',4),Y={class:"d-flex justify-content-center mt-2 mb-2 mt-lg-4"};function q(t,s,o,q,K,W){const Z=(0,e.up)("PageLoading");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(Z,{loader:"bars",active:K.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),K.favorites.length?((0,e.wg)(),(0,e.iD)("div",i,[l,d,(0,e._)("div",r,[(0,e._)("div",c,[(0,e._)("button",{class:"btn btn-outline-danger fw-bold font-Noto mb-1",type:"button",onClick:s[0]||(s[0]=(...t)=>W.removeFavAll&&W.removeFavAll(...t)),disabled:"deleteAll"===K.isLoadingItem||0===K.favorites.length},[(0,e.wy)((0,e._)("span",b,null,512),[[n.F8,"deleteAll"===K.isLoadingItem]]),u],8,g)])]),(0,e._)("div",p,[(0,e._)("div",f,[(0,e._)("table",h,[m,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(K.favProducts,(t=>((0,e.wg)(),(0,e.iD)("tr",{key:t.id,class:"text-start"},[(0,e._)("td",null,[(0,e._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:s=>W.removeFromFavorites(t.id),disabled:K.isLoadingItem===t.id},[(0,e.wy)((0,e._)("span",v,null,512),[[n.F8,K.isLoadingItem===t.id]]),_],8,w)]),(0,e._)("td",k,[(0,e._)("div",{class:"localStorage-product",style:(0,a.j5)({backgroundImage:`url(${t.imageUrl})`})},null,4)]),(0,e._)("td",y,(0,a.zw)(t.title),1),(0,e._)("td",null,[(0,e.wy)((0,e._)("span",L,null,512),[[n.F8,K.isLoadingItem===t.id]]),(0,e._)("span",x,[(0,e.Uk)((0,a.zw)(t.price)+" ",1),I,(0,e._)("span",C," / "+(0,a.zw)(t.unit),1)])]),(0,e._)("td",F,[(0,e._)("button",{type:"button",class:"btn btn-outline-secondary btn-sm mt-2 font-Noto fw-400",disabled:K.isLoadingItem===t.id,onClick:s=>W.goToProductView(t.id)},[(0,e.wy)((0,e._)("span",A,null,512),[[n.F8,K.isLoadingItem===t.id]]),T],8,N)]),(0,e._)("td",null,[(0,e._)("button",{type:"button",class:"btn",onClick:s=>[W.addToCart(t.id),W.removeFromFavorites(t.id)],disabled:K.isLoadingItem===t.id},[(0,e.wy)((0,e._)("span",P,null,512),[[n.F8,K.isLoadingItem===t.id]]),$,D],8,S)])])))),128))])]),(0,e._)("div",U,[(0,e._)("button",{class:"btn btn-danger font-Noto fw-bold border border-1 border-body",type:"button",onClick:s[1]||(s[1]=(...t)=>W.addAllToCart&&W.addAllToCart(...t)),disabled:"addAll"===K.isLoadingItem||0===K.favorites.length},[(0,e.wy)((0,e._)("span",H,null,512),[[n.F8,"addAll"===K.isLoadingItem]]),z],8,j)])])])])):((0,e.wg)(),(0,e.iD)("div",V,[(0,e._)("div",E,[(0,e._)("div",M,[(0,e._)("div",O,[J,(0,e._)("div",Y,[(0,e._)("button",{type:"button",class:"btn btn-outline-dark fs-3 p-2 mb-1 border border-dark border-2 w-30 font-Noto fw-600",onClick:s[2]||(s[2]=(...t)=>W.goToAIDS&&W.goToAIDS(...t))}," 我愛滋 "),(0,e._)("button",{type:"button",class:"btn btn-danger fs-3 link-light mx-2 p-2 mb-1 border border-dark border-1 w-30 font-Noto fw-600",onClick:s[3]||(s[3]=(...t)=>W.backToStore&&W.backToStore(...t))}," 我愛國 ")])])])])]))],64)}var K={data(){return{favorites:JSON.parse(window.localStorage.getItem("favorites"))||[],cartData:{carts:[]},products:[],favProducts:[],productId:"",isLoading:!1,isLoadingItem:""}},methods:{backToStore(){this.$router.push("/productsView")},goToAIDS(){this.$router.push("/aidsIntro")},getFavor(t){this.favorites.forEach((s=>{this.favProducts.push(t.filter((t=>t.id===s)))})),this.favProducts=this.favProducts.flat(1)},getProducts(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/products").then((t=>{this.products=t.data.products,this.getFavor(this.products),this.isLoading=!1})).catch((t=>{this.$frontHttpMessageState(t.response,"產品截取失敗")}))},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart").then((t=>{this.cartData=t.data.data})).catch((t=>{this.$frontHttpMessageState(t.response,"購物車截取失敗")}))},saveToFavorites(t){this.favorites.push(t)},removeFromFavorites(t){this.isLoadingItem="id";const s=this.favorites.indexOf(t);-1!==s&&(this.favorites.splice(s,1),this.isLoadingItem="")},addToCart(t,s=1){const o={product_id:t,qty:s};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart",{data:o}).then((()=>{this.getCart(),this.isLoadingItem=""})).catch((t=>{this.$frontHttpMessageState(t.response,"購物車增加失敗")}))},addAllToCart(){this.isLoadingItem="addAll",this.favorites.forEach((t=>{this.addToCart(t)})),this.removeFavAll(),this.isLoadingItem=""},removeFavAll(){this.isLoadingItem="deleteAll",this.favorites=[],this.favProducts=[],this.isLoadingItem=""},goToProductView(t){this.isLoading=!0,this.$router.push(`/productView/${t}`),this.isLoading=!1}},watch:{favorites:{handler(){window.localStorage.setItem("favorites",JSON.stringify(this.favorites)),this.getProducts()},deep:!0}},created(){this.isLoading=!0,this.getProducts(),this.isLoading=!1}},W=o(3744);const Z=(0,W.Z)(K,[["render",q]]);var B=Z}}]);
//# sourceMappingURL=470.11cece59.js.map