"use strict";(self["webpackChunkweek_8_project"]=self["webpackChunkweek_8_project"]||[]).push([[415],{1415:function(t,o,e){e.r(o),e.d(o,{default:function(){return W}});var s=e(6252),r=e(3577);const d={class:"container mt-4"},a=(0,s.uE)('<div class="container my-3 d-none d-md-grid"><div class="row row-cols-3"><div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 text-dark my-2">購物車</p></button></div><div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 my-2">填寫資訊</p></button></div><div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button"><p class="fs-4 font-Noto fw-600 my-2">訂單內容</p></button></div></div></div><h2 class="font-Noto mt-2 mt-lg-5 fw-700 text-center text-md-start ps-md-5 text-warning"> 步驟 3. 訂單內容 </h2>',2),n={class:"container shadow-sm my-5 bg-body border border-1 border-body align-middle rounded-3 px-lg-5"},l={class:"row row-cols-1 row-cols-lg-2 mt-5 mb-3 justify-content-center"},i={class:"col-lg-6 p-4 bg-body border border-1 border-body"},c=(0,s._)("h3",{class:"fw-bold font-Noto mb-3"},"施主資訊",-1),u={class:"table"},w={key:0},b=(0,s._)("th",{class:"font-Noto fw-400"},"姓名",-1),h={class:"font-Noto fw-400"},f=(0,s._)("th",{class:"font-Noto fw-400"},"Email",-1),_=(0,s._)("th",{class:"font-Noto fw-400"},"電話",-1),g=(0,s._)("th",{class:"font-Noto fw-400"},"地址",-1),p={class:"font-Noto fw-400"},m={class:"col-lg-6 p-4 bg-body border border-1 border-body"},y=(0,s._)("h3",{class:"fw-bold font-Noto mb-3"},"訂單細節",-1),v={class:"table"},N=(0,s._)("th",{class:"font-Noto fw-400"},"訂單編號",-1),k=(0,s._)("th",{class:"font-Noto fw-400"},"下單時間",-1),D=(0,s._)("th",{class:"font-Noto fw-400"},"付款時間",-1),S=(0,s._)("th",{class:"font-Noto fw-400"},"付款狀態",-1),x={key:0,class:"text-success font-Noto fw-600"},z={key:1,class:"text-muted font-Noto fw-600"},$=(0,s._)("th",{class:"font-Noto fw-400"},"總金額",-1),P={class:"fs-4 font-Noto fw-bold text-warning"},L=(0,s._)("hr",null,null,-1),M={class:"row my-2 justify-content-center p-4 bg-body border border-1 border-body"},j=(0,s._)("h3",{class:"fw-bold font-Noto"},"選購商品",-1),F={class:"table col-6 mt-3 fw-bold font-Noto"},Y=(0,s._)("thead",null,[(0,s._)("tr")],-1),C={class:"d-none d-lg-inline"},q={class:"text-end"},E={class:"my-3 d-flex justify-content-center"};function H(t,o,e,H,O,R){const T=(0,s.up)("PageLoading"),W=(0,s.up)("ModalMessage");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(T,{loader:"bars",active:O.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),(0,s.Wm)(W,{ref:"modalMessage"},null,512),(0,s._)("div",d,[a,(0,s._)("div",n,[(0,s._)("div",l,[(0,s._)("div",i,[c,(0,s._)("table",u,[O.orderShow.user?((0,s.wg)(),(0,s.iD)("tbody",w,[(0,s._)("tr",null,[b,(0,s._)("td",h,(0,r.zw)(O.orderShow.user.name),1)]),(0,s._)("tr",null,[f,(0,s._)("td",null,(0,r.zw)(O.orderShow.user.email),1)]),(0,s._)("tr",null,[_,(0,s._)("td",null,(0,r.zw)(O.orderShow.user.tel),1)]),(0,s._)("tr",null,[g,(0,s._)("td",p,(0,r.zw)(O.orderShow.user.address),1)])])):(0,s.kq)("",!0)])]),(0,s._)("div",m,[y,(0,s._)("table",v,[(0,s._)("tbody",null,[(0,s._)("tr",null,[N,(0,s._)("td",null,(0,r.zw)(O.orderShow.id),1)]),(0,s._)("tr",null,[k,(0,s._)("td",null,(0,r.zw)(O.orderShow.create_at),1)]),(0,s._)("tr",null,[D,(0,s._)("td",null,(0,r.zw)(O.PaidDate),1)]),(0,s._)("tr",null,[S,(0,s._)("td",null,[O.orderShow.is_paid?((0,s.wg)(),(0,s.iD)("strong",x,"已付款")):((0,s.wg)(),(0,s.iD)("span",z,"尚未付款"))])]),(0,s._)("tr",null,[$,(0,s._)("td",P,(0,r.zw)(O.orderShow.total),1)])])])])]),L,(0,s._)("div",M,[j,(0,s._)("table",F,[Y,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O.orderShow.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("th",null,(0,r.zw)(t.product.title),1),(0,s._)("td",null,[(0,s.Uk)((0,r.zw)(t.qty)+" ",1),(0,s._)("span",C,"/ "+(0,r.zw)(t.product.unit),1)]),(0,s._)("td",q,(0,r.zw)(t.final_total),1)])))),128))])])]),(0,s._)("div",E,[(0,s._)("button",{type:"button",class:"btn btn-danger fw-bold font-Noto fs-4 w-auto",onClick:o[0]||(o[0]=(...t)=>R.updatePaid&&R.updatePaid(...t))}," 確認並付款 ")])])])],64)}var O={data(){return{status:{},orders:{},orderShow:{},isPaid:!1,isLoading:!1,PaidDate:"尚未付款"}},methods:{PaidDateRenewed(){const t=new Date,o=t.getFullYear(),e=t.getMonth()+1,s=t.getDate(),r=`${o}/${e}/${s}`;return r},dateTimeFormat(t){const o=new Date(1e3*t),e=o.getFullYear(),s=o.getMonth()+1,r=o.getDate(),d=`${e}/${s}/${r}`;return d},getOrder(){const t="https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/orders";this.$http.get(t).then((t=>{this.orders=t.data.orders.map((t=>({...t,create_at:this.dateTimeFormat(t.create_at)}))),this.orderShow=this.orders.pop()})).catch((()=>{this.isLoading=!1}))},updatePaid(){this.isLoading=!0;const{id:t}=this.orderShow,o=`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/pay/${t}`;this.$http.post(o).then((()=>{this.PaidDate=this.PaidDateRenewed(),this.$refs.modalMessage.openModal(!0,"paid",t),this.isLoading=!1})).catch((()=>{this.$refs.modalMessage.openModal(!1,"paid"),this.isLoading=!1}))}},created(){this.isLoading=!0,this.getOrder(),this.isLoading=!1}},R=e(3744);const T=(0,R.Z)(O,[["render",H]]);var W=T}}]);
//# sourceMappingURL=415.3ba75e69.js.map