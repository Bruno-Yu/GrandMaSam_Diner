"use strict";(self["webpackChunkweek_8_project"]=self["webpackChunkweek_8_project"]||[]).push([[235],{771:function(t,e,o){o.d(e,{Z:function(){return k}});var s=o(6252);const a={class:"modal fade",ref:"modalMessage",id:"cartMessage",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},n={class:"modal-dialog"},l={key:0,class:"modal-content"},d={class:"modal-header bg-warning"},i=(0,s._)("h3",{class:"modal-title text-light font-Noto fw-550",id:"exampleModalLabel"}," 執行成功 ",-1),r=(0,s.uE)('<div class="modal-body"><div class="container pt-2 gx-2"><h5 class="fw-bold"><span class="text-success"><i class="bi bi-check-circle"></i></span> 噗通! 商品如粑粑那樣成功落入購物車中 </h5></div></div>',1),c={class:"modal-footer"},u={class:"container gx-2 d-flex justify-content-center"},p={key:1,class:"modal-content"},b={class:"modal-header bg-danger"},g=(0,s._)("h3",{class:"modal-title text-light font-Noto fw-550",id:"exampleModalLabel"}," 刪除警示 ",-1),h=(0,s._)("div",{class:"modal-body"},[(0,s._)("div",{class:"container gx-2 pt-2"},[(0,s._)("h5",{class:"font-Noto fw-550"},"即將被您刪除的商品會感到難過"),(0,s._)("p",{class:"font-Noto fw-400"}," 其實我們的商品也是有情緒的，您這麼做會讓商品感受到您的冷漠，而他們要的，其實不多，只是希望您能接受他們而已 ")])],-1),m={class:"modal-footer gx-2"},f={class:"container d-flex justify-content-end"};function _(t,e,o,_,w,v){return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",n,[w.add?((0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",d,[i,(0,s._)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...t)=>v.closeModal&&v.closeModal(...t)),"data-bs-dismiss":"modal","aria-label":"Close"})]),r,(0,s._)("div",c,[(0,s._)("div",u,[(0,s._)("button",{type:"button",class:"btn btn-warning mx-2 mb-1 p-2 border border-dark border-1 font-Noto fw-400",onClick:e[1]||(e[1]=(...t)=>v.closeModal&&v.closeModal(...t))}," 好優 ")])])])):((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",b,[g,(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:e[2]||(e[2]=(...t)=>v.closeModal&&v.closeModal(...t)),"aria-label":"Close"})]),h,(0,s._)("div",m,[(0,s._)("div",f,[(0,s._)("button",{type:"button",class:"btn btn-outline-dark p-2 mb-1 font-Noto fw-400","data-bs-dismiss":"modal",onClick:e[3]||(e[3]=(...t)=>v.closeModal&&v.closeModal(...t))}," 再想想 "),(0,s._)("button",{type:"button",class:"btn btn-danger ms-2 p-2 mb-1 border border-dark border-1 font-Noto fw-400",onClick:e[4]||(e[4]=e=>(v.removeCart(w.all,w.id),t.$emit("get-cart"),v.closeModal()))}," 這與我無瓜 ")])])]))])],512)}var w=o(7424),v=o.n(w),y={data(){return{modal:null,add:!0,id:"",all:!1}},methods:{openModal(t,e,o){t?this.add=!0:(this.add=!1,this.id=e,this.all=!!o),this.modal.show()},closeModal(){this.modal.hide(),this.id="",this.all=!1},removeCart(t,e){t?this.$http.delete("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/carts").then((()=>{})):this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart/${e}`).then((()=>{}))}},mounted(){this.modal=new(v())(document.querySelector("#cartMessage"))}},C=o(3744);const x=(0,C.Z)(y,[["render",_]]);var k=x},8235:function(t,e,o){o.r(e),o.d(e,{default:function(){return O}});var s=o(6252),a=o(9963),n=o(3577);const l={class:"container px-lg-5"},d=(0,s.uE)('<div class="container my-3 d-none d-md-grid"><div class="row row-cols-3"><div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button"><p class="fs-4 font-Noto fw-600 text-dark my-2">購物車</p></button></div><div class="col"><button class="btn w-100 btn-outline-secondary rounded-2 border border-body border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 my-2">填寫資訊</p></button></div><div class="col"><button class="btn w-100 btn-outline-secondary rounded-2 border border-body border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 my-2">訂單內容</p></button></div></div></div><div class="row mt-5 mb-3"><h2 class="font-Noto fw-700 text-center text-md-start ps-md-5 text-warning"> 步驟 1. 購物車內容 </h2></div>',2),i={class:"row mt-4 px-lg-5"},r={class:"text-end"},c=["disabled"],u={class:"spinner-grow spinner-grow-sm"},p=(0,s.Uk)("清空購物車 "),b={class:"shadow mb-5 bg-body border border-1 border-body p-5 align-middle rounded-3"},g={class:"table"},h=(0,s._)("thead",null,[(0,s._)("tr",{class:"text-start font-Noto fw-bold fs-5 text-primary"},[(0,s._)("th",null,[(0,s.Uk)("刪"),(0,s._)("span",{class:"d-none d-lg-inline"},"除鍵")]),(0,s._)("th",{class:"d-none d-lg-table-cell"},"預覽圖"),(0,s._)("th",null,"品名"),(0,s._)("th",null,[(0,s.Uk)("數量"),(0,s._)("span",{class:"d-none d-lg-inline"},"/單位")]),(0,s._)("th",{class:"d-none d-lg-table-cell text-center"},"單價/總價")])],-1),m={key:0},f=["onClick","disabled"],_={class:"spinner-grow spinner-grow-sm"},w=(0,s.Uk)(" x "),v={class:"d-none d-lg-table-cell"},y={class:"font-Noto fs-5 fw-400"},C={class:"input-group input-group-sm"},x={class:"input-group mb-sm-3"},k=["onUpdate:modelValue","onChange","disabled"],L={class:"spinner-grow spinner-grow-sm"},M=["value"],I={class:"input-group-text d-none d-lg-table-cell font-Noto fw-400",id:"basic-addon2"},N={class:"d-none text-center d-lg-table-cell"},$={class:"spinner-grow spinner-grow-sm"},D={class:"text-secondary fz-sm fs-5"},U={class:"font-Noto fw-400 fs-5"},H=(0,s._)("td",{class:"d-none d-lg-table-cell"},null,-1),q=(0,s._)("td",{colspan:"2",class:"text-end d-lg-none font-Noto fw-400"}," 只需 ",-1),z=(0,s._)("td",{colspan:"3",class:"text-end d-none d-lg-table-cell font-Noto fw-bold"}," 只需 ",-1),A={class:"text-end fs-4 font-Noto fw-bold text-warning"},j=(0,s._)("span",{class:"d-none d-lg-inline font-Noto fw-bold"}," 元",-1),S={class:"row d-flex justify-content-end"},V={class:"col-12 col-lg-4"},Z={class:"input-group mb-3 input-group-sm"},F=(0,s._)("label",{for:"CartView_coupon"},null,-1),P={class:"input-group-append"},Y={class:"text-end my-3"},E=["disabled"];function K(t,e,o,K,W,G){const T=(0,s.up)("PageLoading"),B=(0,s.up)("CartMessage");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(T,{loader:"bars",active:W.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),(0,s.Wm)(B,{ref:"cartMessage",onGetCart:e[0]||(e[0]=t=>G.getCart())},null,512),(0,s._)("div",l,[d,(0,s._)("div",i,[(0,s._)("div",r,[(0,s._)("button",{class:"btn btn-outline-danger fw-bold font-Noto mb-4",type:"button",onClick:e[1]||(e[1]=(...t)=>G.removeCartAll&&G.removeCartAll(...t)),disabled:"deleteAll"===W.isLoadingItem||0===W.cartData.carts.length},[(0,s.wy)((0,s._)("span",u,null,512),[[a.F8,"deleteAll"===W.isLoadingItem]]),p],8,c)]),(0,s._)("div",b,[(0,s._)("table",g,[h,W.cartData.carts?((0,s.wg)(),(0,s.iD)("tbody",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(W.cartData.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id,class:"text-start"},[(0,s._)("td",null,[(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>G.removeCartItem(t.id),disabled:W.isLoadingItem===t.id},[(0,s.wy)((0,s._)("span",_,null,512),[[a.F8,W.isLoadingItem===t.id]]),w],8,f)]),(0,s._)("td",v,[(0,s._)("div",{class:"cartView-product",style:(0,n.j5)({backgroundImage:`url(${t.product.imageUrl})`})},null,4)]),(0,s._)("td",y,(0,n.zw)(t.product.title),1),(0,s._)("td",null,[(0,s._)("div",C,[(0,s._)("div",x,[(0,s.wy)((0,s._)("select",{id:"",class:"form-select","onUpdate:modelValue":e=>t.qty=e,onChange:e=>G.updateCartItem(t),disabled:W.isLoadingItem===t.id},[(0,s.wy)((0,s._)("span",L,null,512),[[a.F8,W.isLoadingItem===t.id]]),((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(20,(e=>(0,s._)("option",{value:e,key:`${e}-${t.id}`},(0,n.zw)(e),9,M))),64))],40,k),[[a.bM,t.qty]]),(0,s._)("span",I,(0,n.zw)(t.product.unit),1)])])]),(0,s._)("td",N,[(0,s.wy)((0,s._)("span",$,null,512),[[a.F8,W.isLoadingItem===t.id]]),(0,s._)("span",D,"單價 "+(0,n.zw)(t.product.price)+"元 /",1),(0,s._)("span",U," 總價"+(0,n.zw)(t.total)+"元 ",1)])])))),128))])):(0,s.kq)("",!0),(0,s._)("tfoot",null,[(0,s._)("tr",null,[H,q,z,(0,s._)("td",A,[(0,s.Uk)((0,n.zw)(W.cartData.total),1),j])])])]),(0,s._)("div",S,[(0,s._)("div",V,[(0,s._)("div",Z,[F,(0,s.wy)((0,s._)("input",{type:"text",id:"CartView_coupon",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>W.coupon_code=t),placeholder:"請輸入挑戰碼"},null,512),[[a.nr,W.coupon_code]]),(0,s._)("div",P,[(0,s._)("button",{class:"btn btn-outline-secondary font-Noto fw-bold rounded-0",type:"button",onClick:e[3]||(e[3]=(...t)=>G.addCouponCode&&G.addCouponCode(...t))}," 套用挑戰碼 ")])]),(0,s._)("div",Y,[(0,s._)("button",{class:"btn btn-danger font-Noto fw-bold shadow",type:"button",style:{width:"30%"},onClick:e[4]||(e[4]=(...t)=>G.nextPage&&G.nextPage(...t)),disabled:"deleteAll"===W.isLoadingItem||0===W.cartData.carts.length}," 下一步 ",8,E)])])])])])])],64)}var W=o(771),G=o(4902),T={data(){return{cartData:{carts:[]},products:[],productId:"",isLoading:!1,isLoadingItem:"",coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{CartMessage:W.Z},methods:{getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart").then((t=>{this.cartData=t.data.data,G.Z.emit("cart-num",this.cartData.carts.length),this.$emit("get-cart")}))},addToCart(t,e=1){const o={product_id:t,qty:e};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart",{data:o}).then((()=>{this.getCart(),this.isLoadingItem=""})).catch((t=>{this.$frontHttpMessageState(t.response,"購物車更新失敗")}))},removeCartItem(t){this.isLoadingItem=t,this.$refs.cartMessage.openModal(!1,t,!1),this.getCart(),this.isLoadingItem=""},removeCartAll(){this.isLoadingItem="deleteAll",this.isLoadingItem="",this.$refs.cartMessage.openModal(!1,"",!0),this.getCart()},updateCartItem(t){const e={product_id:t.product.id,qty:t.qty};this.isLoadingItem=t.id,this.$http.put(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart/${t.id}`,{data:e}).then((t=>{this.$frontHttpMessageState(t,"更改成功"),this.getCart(),this.isLoadingItem=""})).catch((t=>{this.isLoading=!1,this.$frontHttpMessageState(t.response,"更改失敗")}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$frontHttpMessageState(t,"加入挑戰碼"),this.getCart(),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$frontHttpMessageState(t.response,"尚無該挑戰")}))},nextPage(){this.isLoading=!0,this.$router.push("/userContact"),this.isLoading=!1}},created(){this.isLoading=!0,this.getCart(),this.isLoading=!1}},B=o(3744);const J=(0,B.Z)(T,[["render",K]]);var O=J}}]);
//# sourceMappingURL=235.8be4acc9.js.map